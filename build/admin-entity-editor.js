(()=>{"use strict";var e,t={337:()=>{const e=window.wp.element,t=window.wp.components,n=window.ReactJSXRuntime,l=async(e,{signal:t}={})=>{const n=await window.fetch(`${DBVC_ENTITY_EDITOR_APP.root}${e}`,{headers:{"X-WP-Nonce":DBVC_ENTITY_EDITOR_APP.nonce},signal:t});if(!n.ok){const e=await n.text();throw new Error(e||`Request failed (${n.status})`)}return n.json()},i=async(e,t)=>{const n=await window.fetch(`${DBVC_ENTITY_EDITOR_APP.root}${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":DBVC_ENTITY_EDITOR_APP.nonce},body:JSON.stringify(t)});if(!n.ok){const e=await n.text();let t=e;try{t=JSON.parse(e)}catch(e){}const l=new Error(t?.message||e||`Request failed (${n.status})`);throw l.body=t,l.status=n.status,l}return n.json()},a=e=>{if(!e)return"—";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()},s=e=>{if(!e||!DBVC_ENTITY_EDITOR_APP?.download_url)return"";const t=new URLSearchParams({action:"dbvc_entity_editor_download",path:e,_wpnonce:DBVC_ENTITY_EDITOR_APP.download_nonce||""});return`${DBVC_ENTITY_EDITOR_APP.download_url}?${t.toString()}`},o=(e,t)=>{const n=(e||"").toLowerCase(),l=(t||"").trim().toLowerCase();if(!l)return[];const i=[];let a=0;for(;a<n.length;){const e=n.indexOf(l,a);if(-1===e)break;i.push(e),a=e+Math.max(1,l.length)}return i},r=()=>{var r,c,d;const[u,h]=(0,e.useState)([]),[p,m]=(0,e.useState)(null),[y,x]=(0,e.useState)(!1),[b,v]=(0,e.useState)(""),[f,k]=(0,e.useState)("all"),[_,j]=(0,e.useState)("all"),[g,S]=(0,e.useState)(""),[C,N]=(0,e.useState)({key:"mtime",direction:"desc"}),[w,E]=(0,e.useState)(1),[T,O]=(0,e.useState)([]),[I,P]=(0,e.useState)(""),[R,D]=(0,e.useState)(null),[B,A]=(0,e.useState)(!1),[J,M]=(0,e.useState)(""),[F,$]=(0,e.useState)(""),[L,V]=(0,e.useState)(""),[Y,q]=(0,e.useState)(null),[W,K]=(0,e.useState)(null),[U,X]=(0,e.useState)(!1),[G,H]=(0,e.useState)(!1),[Z,z]=(0,e.useState)(!1),[Q,ee]=(0,e.useState)(""),[te,ne]=(0,e.useState)(""),[le,ie]=(0,e.useState)(""),[ae,se]=(0,e.useState)(-1),[oe,re]=(0,e.useState)(!1),[ce,de]=(0,e.useState)(""),[ue,he]=(0,e.useState)(""),[pe,me]=(0,e.useState)(!1),ye=(0,e.useRef)(null),xe=(0,e.useCallback)(async(e=!1)=>{x(!0),v("");try{const t=e?await i("entity-editor/index/rebuild",{}):await l("entity-editor/index");h(Array.isArray(t?.items)?t.items:[]),m(t?.stats||null)}catch(e){v(e?.message||"Failed to load entity index")}finally{x(!1)}},[]),be=(0,e.useCallback)(async(e,t=!1)=>{if(e){A(!0),M(""),K(null);try{const n=await l(`entity-editor/file?path=${encodeURIComponent(e)}${t?"&force_takeover=1":""}`);D(n),$(n?.content||""),ne(""),ee(""),V(n?.lock?.token||""),q(n?.lock||null)}catch(e){D(null),M(e?.message||"Failed to load entity file"),V(""),q(null),K(e?.body?.data?.lock||null)}finally{A(!1)}}},[]),ve=le.trim(),fe=(0,e.useMemo)(()=>o(F,ve),[F,ve]),ke=(0,e.useCallback)((e,t,n,{keepInputFocus:l=!0}={})=>{if(!Array.isArray(t)||!t.length||!n)return;const i=ye.current||document.querySelector("textarea.dbvc-entity-editor__textarea");if(!i)return;const a=document.activeElement,s=Math.max(0,Math.min(e,t.length-1)),o=t[s],r=o+n.length;i.focus(),i.setSelectionRange(o,r);const c=(i.value.slice(0,o).match(/\n/g)||[]).length,d=Number.parseFloat(window.getComputedStyle(i).lineHeight)||20;i.scrollTop=Math.max(0,c*d-.35*i.clientHeight),l&&a&&a!==i&&"function"==typeof a.focus&&a.focus(),se(s)},[]),_e=(0,e.useCallback)(()=>{const e=ye.current||document.querySelector("textarea.dbvc-entity-editor__textarea");return e?Math.max(0,Number(e.selectionStart||0)):0},[]);(0,e.useEffect)(()=>{0!==u.length||y||b||xe(!1)},[u.length,y,b,xe]),(0,e.useEffect)(()=>{if(!I)return D(null),V(""),q(null),K(null),M(""),ie(""),void se(-1);be(I,!1)},[I,be]),(0,e.useEffect)(()=>{if(!ve||!fe.length)return void se(-1);const e=_e(),t=fe.findIndex(t=>t===e);if(t>=0)return void se(t);const n=fe.findIndex(t=>t>e);se(n>=0?n:fe.length-1)},[fe,ve,_e]),(0,e.useEffect)(()=>{j("all"),E(1)},[f]),(0,e.useEffect)(()=>{const e=new Set(u.map(e=>e.relative_path).filter(Boolean));O(t=>t.filter(t=>e.has(t)))},[u]);const je=(0,e.useCallback)(async(e=!1)=>{if(I){ne(""),ee(""),K(null);try{JSON.parse(F||"{}")}catch(e){return void ne(e?.message||"Invalid JSON")}X(!0);try{const t=await i("entity-editor/file/save",{path:I,content:F,lock_token:L||"",force_takeover:!!e});D(e=>({...e,...t})),$(t?.content||F),ee(e?"Saved JSON and took over lock.":"Saved JSON to sync folder."),V(t?.lock?.token||L),q(t?.lock||Y),h([])}catch(e){ne(e?.message||"Failed to save JSON"),K(e?.body?.data?.lock||null)}finally{X(!1)}}},[I,F,L,Y]),ge=(0,e.useCallback)(async(e=!1)=>{if(I){ne(""),ee(""),K(null);try{JSON.parse(F||"{}")}catch(e){return void ne(e?.message||"Invalid JSON")}H(!0);try{var t,n,l;const a=await i("entity-editor/file/import-partial",{path:I,content:F,lock_token:L||"",force_takeover:!!e}),s=a?.import_result?.counts||{};D(e=>({...e,...a})),$(a?.content||F),V(a?.lock?.token||L),q(a?.lock||Y),ee(`Saved + partial import complete (fields: ${null!==(t=s.core_fields_updated)&&void 0!==t?t:0}, meta: ${null!==(n=s.meta_keys_updated)&&void 0!==n?n:0}, tax: ${null!==(l=s.taxonomies_updated)&&void 0!==l?l:0}).`),h([])}catch(e){ne(e?.message||"Failed to run partial import"),K(e?.body?.data?.lock||null)}finally{H(!1)}}},[I,F,L,Y]),Se=(0,e.useCallback)(async(e=!1,t="")=>{if(!I)return;ne(""),ee(""),K(null);const n=(t||"").trim();if("REPLACE"===n){try{JSON.parse(F||"{}")}catch(e){return void ne(e?.message||"Invalid JSON")}z(!0);try{var l,a,s,o;const t=await i("entity-editor/file/import-replace",{path:I,content:F,confirm_phrase:n,lock_token:L||"",force_takeover:!!e}),r=t?.import_result?.counts||{},c=t?.import_result?.snapshot_path||"";D(e=>({...e,...t})),$(t?.content||F),V(t?.lock?.token||L),q(t?.lock||Y),ee(`Saved + full replace complete (fields: ${null!==(l=r.core_fields_updated)&&void 0!==l?l:0}, meta updated: ${null!==(a=r.meta_keys_updated)&&void 0!==a?a:0}, meta deleted: ${null!==(s=r.meta_keys_deleted)&&void 0!==s?s:0}, tax: ${null!==(o=r.taxonomies_updated)&&void 0!==o?o:0})${c?`; snapshot: ${c}`:""}.`),h([])}catch(e){ne(e?.message||"Failed to run full replace"),K(e?.body?.data?.lock||null)}finally{z(!1)}}else ne('Full replace requires typing "REPLACE".')},[I,F,L,Y]),Ce=(0,e.useCallback)((e=!1)=>{me(!!e),de(""),he(""),re(!0)},[]),Ne=(0,e.useCallback)(()=>{re(!1),de(""),he(""),me(!1)},[]),we=(0,e.useCallback)(async()=>{const e=(ce||"").trim();"REPLACE"===e?(he(""),re(!1),await Se(pe,e)):he('Type "REPLACE" to continue.')},[ce,pe,Se]),Ee=(0,e.useMemo)(()=>{const e=new Set;return u.forEach(t=>{"all"!==f&&t.entity_kind!==f||!t.subtype||e.add(t.subtype)}),Array.from(e).sort((e,t)=>e.localeCompare(t,void 0,{sensitivity:"base"}))},[u,f]),Te=(0,e.useMemo)(()=>{const e=g.trim().toLowerCase();return u.filter(t=>("all"===f||t.entity_kind===f)&&(("all"===_||t.subtype===_)&&(!e||[t.title,t.slug,t.uid,t.relative_path,t.subtype,t.entity_kind].map(e=>(e||"").toString().toLowerCase()).some(t=>t.includes(e)))))},[u,f,_,g]),Oe=(0,e.useMemo)(()=>{const e=[...Te],t=(e,t)=>"mtime"===t?Number(e?.mtime||0):(e?.[t]||"").toString().toLowerCase();return e.sort((e,n)=>{const l=t(e,C.key),i=t(n,C.key);if(l===i)return 0;const a=l>i?1:-1;return"asc"===C.direction?a:-1*a}),e},[Te,C]),Ie=Math.max(1,Math.ceil(Oe.length/20)),Pe=Math.min(w,Ie),Re=(0,e.useMemo)(()=>new Set(T),[T]),De=(0,e.useMemo)(()=>Oe.map(e=>e.relative_path).filter(Boolean),[Oe]),Be=(0,e.useMemo)(()=>{const e=20*(Pe-1);return Oe.slice(e,e+20)},[Oe,Pe]),Ae=(0,e.useMemo)(()=>Be.map(e=>e.relative_path).filter(Boolean),[Be]),Je=(0,e.useMemo)(()=>De.reduce((e,t)=>Re.has(t)?e+1:e,0),[De,Re]),Me=De.length>0&&Je===De.length,Fe=Ae.length>0&&Ae.every(e=>Re.has(e)),$e=e=>{E(1),N(t=>t.key===e?{key:e,direction:"asc"===t.direction?"desc":"asc"}:{key:e,direction:"asc"})},Le=()=>{P(""),D(null),$(""),ee(""),ne(""),V(""),q(null),K(null),re(!1),de(""),he(""),me(!1)},Ve=e=>{O(t=>{const n=new Set(t);return De.forEach(t=>{e?n.add(t):n.delete(t)}),Array.from(n)})},Ye=U||G||Z,qe=!!ve&&fe.length>0,We=({keepInputFocus:e=!0}={})=>{if(!qe)return;const t=_e(),n=fe.findIndex(e=>e>t);ke(n>=0?n:0,fe,ve,{keepInputFocus:e})},Ke=({keepInputFocus:e=!0}={})=>{if(!qe)return;const t=_e();let n=-1;for(let e=fe.length-1;e>=0;e-=1)if(fe[e]<t){n=e;break}ke(n>=0?n:fe.length-1,fe,ve,{keepInputFocus:e})};return(0,n.jsxs)("div",{className:"dbvc-admin-app is-route-entity-editor",children:[(0,n.jsxs)("div",{className:"dbvc-admin-app__header",children:[(0,n.jsx)("h1",{children:"DBVC Entity Editor"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,n.jsx)(t.Button,{variant:"secondary",onClick:()=>xe(!1),disabled:y,title:"Refresh the entity index from cache",children:y?"Refreshing…":"Refresh index"}),(0,n.jsx)(t.Button,{variant:"tertiary",onClick:()=>xe(!0),disabled:y,isBusy:y,title:"Force a full sync-folder rescan and rebuild the index",children:y?"Rebuilding…":"Rebuild index"})]})]}),(0,n.jsxs)("section",{className:"dbvc-entity-editor-shell",children:[(0,n.jsx)("h2",{children:"Entity index"}),(0,n.jsxs)("p",{className:"description",children:["Showing ",Oe.length," indexed entities from sync (posts + terms only)."]}),b&&(0,n.jsx)("div",{className:"notice notice-error",children:(0,n.jsx)("p",{children:b})}),(0,n.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:[(0,n.jsxs)("label",{children:["Kind"," ",(0,n.jsxs)("select",{value:f,onChange:e=>{k(e.target.value),E(1)},children:[(0,n.jsx)("option",{value:"all",children:"All"}),(0,n.jsx)("option",{value:"post",children:"Posts"}),(0,n.jsx)("option",{value:"term",children:"Terms"})]})]}),(0,n.jsxs)("label",{children:["Subtype"," ",(0,n.jsxs)("select",{value:_,onChange:e=>{j(e.target.value),E(1)},children:[(0,n.jsx)("option",{value:"all",children:"All"}),Ee.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("label",{children:["Search"," ",(0,n.jsx)("input",{type:"search",value:g,onChange:e=>{S(e.target.value),E(1)},placeholder:"title, slug, uid, file"})]}),(0,n.jsxs)("button",{type:"button",className:"button",onClick:()=>Ve(!0),disabled:!De.length||Me,title:"Select all rows that match current filters (all pages)",children:["Select filtered (",De.length,")"]}),(0,n.jsx)("button",{type:"button",className:"button",onClick:()=>Ve(!1),disabled:!Je,title:"Deselect selected rows that match current filters",children:"Deselect filtered"}),(0,n.jsx)("button",{type:"button",className:"button",onClick:()=>O([]),disabled:!T.length,title:"Clear all selected rows",children:"Clear selection"}),(0,n.jsxs)("button",{type:"button",className:"button button-primary",onClick:()=>{if(!T.length||!DBVC_ENTITY_EDITOR_APP?.download_url)return;const e=document.createElement("form");e.method="POST",e.action=DBVC_ENTITY_EDITOR_APP.download_url,e.style.display="none";const t={action:"dbvc_entity_editor_download_bulk",_wpnonce:DBVC_ENTITY_EDITOR_APP.download_bulk_nonce||"",paths:JSON.stringify(T)};Object.entries(t).forEach(([t,n])=>{const l=document.createElement("input");l.type="hidden",l.name=t,l.value=n,e.appendChild(l)}),document.body.appendChild(e),e.submit(),e.remove()},disabled:!T.length,title:"Download selected entity JSON files as a ZIP archive",children:["Download selected (",T.length,")"]})]}),(0,n.jsx)("div",{className:"dbvc-entity-editor-shell__pane dbvc-entity-editor__table",children:(0,n.jsxs)("table",{className:"widefat striped",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)("input",{type:"checkbox",checked:Fe,onChange:e=>{return t=e.target.checked,void O(e=>{const n=new Set(e);return Ae.forEach(e=>{t?n.add(e):n.delete(e)}),Array.from(n)});var t},title:"Select/deselect all rows on this page"})}),(0,n.jsx)("th",{children:(0,n.jsxs)("button",{type:"button",className:"button button-link",onClick:()=>$e("entity_kind"),children:["Kind","entity_kind"===C.key?"asc"===C.direction?" ↑":" ↓":""]})}),(0,n.jsx)("th",{children:"Matched WP"}),(0,n.jsx)("th",{children:"Actions"}),(0,n.jsx)("th",{children:(0,n.jsxs)("button",{type:"button",className:"button button-link",onClick:()=>$e("subtype"),children:["Subtype","subtype"===C.key?"asc"===C.direction?" ↑":" ↓":""]})}),(0,n.jsx)("th",{children:(0,n.jsxs)("button",{type:"button",className:"button button-link",onClick:()=>$e("title"),children:["Title","title"===C.key?"asc"===C.direction?" ↑":" ↓":""]})}),(0,n.jsx)("th",{children:(0,n.jsxs)("button",{type:"button",className:"button button-link",onClick:()=>$e("slug"),children:["Slug","slug"===C.key?"asc"===C.direction?" ↑":" ↓":""]})}),(0,n.jsx)("th",{children:(0,n.jsxs)("button",{type:"button",className:"button button-link",onClick:()=>$e("uid"),children:["UID","uid"===C.key?"asc"===C.direction?" ↑":" ↓":""]})}),(0,n.jsx)("th",{children:(0,n.jsxs)("button",{type:"button",className:"button button-link",onClick:()=>$e("mtime"),children:["Modified","mtime"===C.key?"asc"===C.direction?" ↑":" ↓":""]})}),(0,n.jsx)("th",{children:(0,n.jsxs)("button",{type:"button",className:"button button-link",onClick:()=>$e("relative_path"),children:["File","relative_path"===C.key?"asc"===C.direction?" ↑":" ↓":""]})})]})}),(0,n.jsx)("tbody",{children:Be.length?Be.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("input",{type:"checkbox",checked:Re.has(e.relative_path),onChange:t=>{return n=e.relative_path,l=t.target.checked,void(n&&O(e=>{const t=new Set(e);return l?t.add(n):t.delete(n),Array.from(t)}));var n,l},title:"Select this entity row"})}),(0,n.jsx)("td",{children:e.entity_kind||"—"}),(0,n.jsx)("td",{children:e.matched_wp?.id?(0,n.jsxs)("a",{href:e.matched_wp?.edit_url||"#",children:[e.matched_wp?.kind||"wp"," #",e.matched_wp?.id]}):"—"}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{type:"button",className:"button button-small",onClick:()=>P(e.relative_path),title:"Open this JSON file in the editor",children:"Edit JSON"})}),(0,n.jsx)("td",{children:e.subtype||"—"}),(0,n.jsx)("td",{children:e.title||"—"}),(0,n.jsx)("td",{children:e.slug||"—"}),(0,n.jsx)("td",{children:e.uid||"—"}),(0,n.jsx)("td",{children:e.mtime_gmt?a(e.mtime_gmt):"—"}),(0,n.jsx)("td",{children:e.relative_path?(0,n.jsx)("a",{href:s(e.relative_path),download:!0,title:"Download this entity JSON file",children:e.relative_path}):"—"})]},e.relative_path)):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:10,children:y?"Loading index…":"No matching entities found."})})})]})}),I&&(t.Modal?(0,n.jsx)(t.Modal,{title:`Editing: ${I}`,onRequestClose:()=>{oe||Le()},className:"dbvc-entity-editor-modal",overlayClassName:"dbvc-entity-editor-modal-overlay",children:(0,n.jsxs)("div",{className:"dbvc-entity-editor-shell__pane dbvc-entity-editor__editor",children:[B&&(0,n.jsxs)("p",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,n.jsx)(t.Spinner,{})," Loading file…"]}),J&&(0,n.jsx)("div",{className:"notice notice-error",children:(0,n.jsx)("p",{children:J})}),W&&(0,n.jsxs)("div",{className:"notice notice-warning",children:[(0,n.jsxs)("p",{children:["Current lock owner: ",W?.user_display||"another user",W?.expires_at?` (expires ${a(W.expires_at)})`:""]}),(0,n.jsx)("button",{type:"button",className:"button",onClick:()=>be(I,!0),title:"Take ownership of this file lock so you can edit and save",children:"Take over lock"})]}),R&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{className:"description",children:["Kind: ",R.entity_kind||"—"," · Subtype: ",R.subtype||"—"," · UID: ",R.uid||"—"]}),Y&&(0,n.jsxs)("p",{className:"description",children:["Editor lock: ",Y?.user_display||"unknown",Y?.expires_at?` · expires ${a(Y.expires_at)}`:""]}),(0,n.jsxs)("div",{className:"dbvc-entity-editor__actions",style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(0,n.jsxs)("div",{className:"dbvc-entity-editor__search",children:[(0,n.jsx)("input",{type:"search",value:le,onChange:e=>(e=>{ie(e);const t=e.trim();if(!t)return void se(-1);const n=o(F,t);if(!n.length)return void se(-1);const l=_e(),i=n.findIndex(e=>e>=l);ke(i>=0?i:0,n,t)})(e.target.value),onKeyDown:e=>{if("Enter"===e.key){if(e.preventDefault(),e.shiftKey)return void Ke({keepInputFocus:!0});We({keepInputFocus:!0})}},placeholder:"Find in JSON...",title:"Search within JSON (Enter = next, Shift+Enter = previous)"}),(0,n.jsx)("button",{type:"button",className:"button button-small",onClick:()=>Ke({keepInputFocus:!1}),disabled:!qe,title:"Jump to previous match",children:"Prev"}),(0,n.jsx)("button",{type:"button",className:"button button-small",onClick:()=>We({keepInputFocus:!1}),disabled:!qe,title:"Jump to next match",children:"Next"}),(0,n.jsx)("span",{className:"dbvc-entity-editor__search-count",children:qe?`${ae+1} / ${fe.length}`:ve?"0 matches":"Find"})]}),(0,n.jsx)(t.Button,{variant:"primary",onClick:()=>je(!1),disabled:Ye||!L,isBusy:U,title:"Save JSON file only (no database changes)",children:U?"Saving…":"Save JSON"}),(0,n.jsx)(t.Button,{variant:"secondary",onClick:()=>ge(!1),disabled:Ye||!L,isBusy:G,title:"Save JSON and merge only fields/meta present in JSON",children:G?"Importing…":"Save + Partial Import"}),(0,n.jsx)(t.Button,{variant:"secondary",onClick:()=>Ce(!1),disabled:Ye||!L,isBusy:Z,title:"Save JSON and fully replace entity data (destructive)",children:Z?"Replacing…":"Save + Full Replace"}),(0,n.jsx)(t.Button,{variant:"tertiary",onClick:Le,disabled:Ye,title:"Close editor and return to entity table",children:"Close"})]}),(0,n.jsx)("textarea",{className:"dbvc-entity-editor__textarea",ref:ye,value:F,onChange:e=>{$(e.target.value),ee(""),ne("")}}),te&&(0,n.jsxs)("div",{className:"notice notice-error",children:[(0,n.jsx)("p",{children:te}),W&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{type:"button",className:"button",onClick:()=>je(!0),disabled:Ye,title:"Take lock ownership and save JSON to sync folder",children:"Take over lock and save"}),(0,n.jsx)("button",{type:"button",className:"button",onClick:()=>Ce(!0),disabled:Ye,title:"Take lock ownership and run destructive full replace",children:"Take over lock and full replace"})]})]}),Q&&(0,n.jsx)("div",{className:"notice notice-success",children:(0,n.jsx)("p",{children:Q})})]})]})}):(0,n.jsx)("div",{className:"dbvc-entity-editor-shell__pane dbvc-entity-editor__editor",style:{marginTop:"12px"},children:(0,n.jsx)("div",{className:"notice notice-warning",children:(0,n.jsx)("p",{children:"Editor modal is unavailable in this WordPress build."})})})),(0,n.jsxs)("div",{style:{marginTop:"10px",display:"flex",gap:"8px",alignItems:"center"},children:[(0,n.jsx)("button",{type:"button",className:"button",disabled:Pe<=1,onClick:()=>E(e=>Math.max(1,e-1)),title:"Go to previous page of entities",children:"Previous"}),(0,n.jsxs)("span",{children:["Page ",Pe," of ",Ie]}),(0,n.jsx)("button",{type:"button",className:"button",disabled:Pe>=Ie,onClick:()=>E(e=>Math.min(Ie,e+1)),title:"Go to next page of entities",children:"Next"}),p&&(0,n.jsxs)("small",{children:[" · indexed: ",null!==(r=p?.indexed_files)&&void 0!==r?r:0,", scanned: ",null!==(c=p?.scanned_files)&&void 0!==c?c:0,", excluded: ",null!==(d=p?.excluded_files)&&void 0!==d?d:0]})]}),oe&&(t.Modal?(0,n.jsxs)(t.Modal,{title:"Confirm Full Replace",onRequestClose:Ne,children:[(0,n.jsx)("p",{children:"This operation is destructive. Meta keys not present in JSON will be deleted (except protected keys)."}),pe&&(0,n.jsx)("p",{children:"This action will also take over the editor lock."}),(0,n.jsxs)("p",{children:["Type ",(0,n.jsx)("code",{children:"REPLACE"})," to confirm."]}),(0,n.jsx)("input",{type:"text",value:ce,onChange:e=>{de(e.target.value),he("")},placeholder:"REPLACE",style:{width:"100%"}}),ue&&(0,n.jsx)("p",{style:{color:"#b32d2e"},children:ue}),(0,n.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",marginTop:"12px"},children:[(0,n.jsx)(t.Button,{variant:"tertiary",onClick:Ne,title:"Cancel full replace and return to editor",children:"Cancel"}),(0,n.jsx)(t.Button,{variant:"primary",onClick:we,disabled:Z,isBusy:Z,title:"Confirm destructive full replace",children:"Confirm Replace"})]})]}):(0,n.jsxs)("div",{className:"notice notice-warning",children:[(0,n.jsx)("p",{children:'Typed confirmation needed: enter "REPLACE" then use Save + Full Replace.'}),(0,n.jsx)("button",{type:"button",className:"button",onClick:Ne,title:"Close this warning",children:"Close"})]}))]})]})},c=document.getElementById("dbvc-entity-editor-root");c&&(0,e.createRoot)(c).render((0,n.jsx)(r,{}))}},n={};function l(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,l),a.exports}l.m=t,e=[],l.O=(t,n,i,a)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,i,a]=e[d],o=!0,r=0;r<n.length;r++)(!1&a||s>=a)&&Object.keys(l.O).every(e=>l.O[e](n[r]))?n.splice(r--,1):(o=!1,a<s&&(s=a));if(o){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,i,a]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={162:0,681:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var i,a,[s,o,r]=n,c=0;if(s.some(t=>0!==e[t])){for(i in o)l.o(o,i)&&(l.m[i]=o[i]);if(r)var d=r(l)}for(t&&t(n);c<s.length;c++)a=s[c],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(d)},n=globalThis.webpackChunkdb_version_control_admin_app=globalThis.webpackChunkdb_version_control_admin_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=l.O(void 0,[681],()=>l(337));i=l.O(i)})();